

/**************///////////////////////**************/////////////////////////////////////*

const quiz = document.getElementById('quiz');
const questionElement = document.getElementById('question');
const optionsElement = document.getElementById('options');
const nextButton = document.getElementById('next-btn');
const resultElement = document.getElementById('result');
const categorySelection = document.getElementById('category');
const levelSelection = document.getElementById('level');
const startButton = document.getElementById('start-btn');

let currentQuestionIndex = 0;
let currentCategory = '';
let currentLevel = '';
let score = 0;
let incorrectQuestions = [];

startButton.addEventListener('click', startQuiz);

function startQuiz() {
    currentCategory = categorySelection.value;
    currentLevel = levelSelection.value;
    currentQuestionIndex = 0; // Reset index for new game
    score = 0; // Reset score for new game
    incorrectQuestions = []; // Reset incorrect questions for new game
    resultElement.textContent = ''; // Clear result message at start
    loadQuestion(currentCategory, currentLevel);
    startButton.style.display = 'none';
    categorySelection.disabled = true;
    levelSelection.disabled = true;
}

function loadQuestion(category, level) {
    const currentQuestion = questions[category][level][currentQuestionIndex];
    questionElement.textContent = currentQuestion.question;

    optionsElement.innerHTML = '';
    currentQuestion.options.forEach(option => {
        const button = document.createElement('button');
        button.textContent = option;
        button.addEventListener('click', () => {
            checkAnswer(option, button);
        });
        optionsElement.appendChild(button);
    });

    resultElement.textContent = ''; // Clear previous result message
    nextButton.style.display = 'none';
}

function checkAnswer(selectedOption, button) {
    const currentQuestion = questions[currentCategory][currentLevel][currentQuestionIndex];
    const correctIcon = document.createElement('span');
    const incorrectIcon = document.createElement('span');

    correctIcon.innerHTML = ' ✔️';
    incorrectIcon.innerHTML = ' ❌';

    if (selectedOption === currentQuestion.answer) {
        score += 5; // Each correct answer is worth 5 points
        resultElement.textContent = '¡Respuesta correcta!';
        resultElement.style.color = 'green'; // Set color to green for correct answer
        button.appendChild(correctIcon);
    } else {
        resultElement.textContent = 'Respuesta incorrecta';
        resultElement.style.color = 'red'; // Set color to red for incorrect answer
        button.appendChild(incorrectIcon);
        incorrectQuestions.push(currentQuestion); // Save incorrect question
        // Highlight the correct answer
        const buttons = optionsElement.getElementsByTagName('button');
        for (let btn of buttons) {
            if (btn.textContent === currentQuestion.answer) {
                btn.appendChild(correctIcon.cloneNode(true));
            }
        }
    }

    // Disable all buttons after selection
    const buttons = optionsElement.getElementsByTagName('button');
    for (let btn of buttons) {
        btn.disabled = true;
    }

    nextButton.style.display = 'block';

    // Check if the score qualifies for earning a star
    if (score % 20 === 0) {
        showStars(score / 20); // Call a function to display stars earned
    }
}

function nextQuestion() {
    if (currentQuestionIndex < questions[currentCategory][currentLevel].length - 1) {
        currentQuestionIndex++; // Incrementar antes de cargar la siguiente pregunta
        loadQuestion(currentCategory, currentLevel);
    } else {
        showSummary();
    }
}



function showSummary() {
    let summaryHtml = `<h2>Has completado el quiz. Puntuación: ${score}/${questions[currentCategory][currentLevel].length * 5}</h2>`;
    if (incorrectQuestions.length > 0) {
        summaryHtml += '<h3>Preguntas incorrectas:</h3>';
        incorrectQuestions.forEach((q, index) => {
            summaryHtml += `<p>${index + 1}. ${q.question}</p>`;
            summaryHtml += `<p>Respuesta correcta: ${q.answer}</p>`;
        });
    } else {
        summaryHtml += '<p>¡Perfecto! Has acertado todas las preguntas.</p>';
    }

    // Calculate stars earned
    const starsEarned = Math.floor(score / 20);

    // Add stars earned to the summary
    summaryHtml += `<p>Estrellas ganadas: ${starsEarned}</p>`;

    summaryHtml += '<button id="new-quiz-btn">Nuevo Quiz</button>';
    quiz.innerHTML = summaryHtml;

    document.getElementById('new-quiz-btn').addEventListener('click', () => {
        window.location.reload();
    });
}



                {
                    "question": "¿Cuál fue el nombre del filósofo griego considerado el padre de la filosofía occidental?",
                    "options": ["Tales de Mileto", "Sócrates", "Platón", "Aristóteles"],
                    "answer": "Tales de Mileto"
                },
                {
                    "question": "¿Cuál fue el nombre del último emperador de Rusia, quien fue asesinado junto con su familia durante la Revolución Rusa?",
                    "options": ["Nicolás II", "Alejandro III", "Alejandro II", "Pedro II"],
                    "answer": "Nicolás II"
                },
                {
                    "question": "¿Cuál fue el nombre del líder de la Revolución Haitiana que condujo a la independencia de Haití del dominio francés?",
                    "options": ["Toussaint Louverture", "Jean-Jacques Dessalines", "Henri Christophe", "Alexandre Pétion"],
                    "answer": "Toussaint Louverture"
                },
                {
                    "question": "¿Cuál fue el nombre del líder militar y político que dirigió la unificación de Italia en el siglo XIX?",
                    "options": ["Giuseppe Garibaldi", "Camillo Benso, conde de Cavour", "Víctor Manuel II", "Giuseppe Mazzini"],
                    "answer": "Giuseppe Garibaldi"
                },
                {
                    "question": "¿Cuál fue el nombre del emperador romano que adoptó el cristianismo como religión oficial del Imperio Romano?",
                    "options": ["Constantino I", "Augusto", "Julio César", "Marco Aurelio"],
                    "answer": "Constantino I"
                },
                {
                    "question": "¿Cuál fue el nombre del líder político y militar que estableció el Primer Imperio Francés después de la Revolución Francesa?",
                    "options": ["Napoleón Bonaparte", "Robespierre", "Luís XVIII", "Carlos X"],
                    "answer": "Napoleón Bonaparte"
                },
                {
                    "question": "¿Cuál fue el nombre del filósofo alemán cuyas ideas fueron fundamentales para el desarrollo del existencialismo?",
                    "options": ["Friedrich Nietzsche", "Immanuel Kant", "Søren Kierkegaard", "Jean-Paul Sartre"],
                    "answer": "Friedrich Nietzsche"
                },
                {
                    "question": "¿Cuál fue el nombre del emperador romano que construyó el Coliseo de Roma?",
                    "options": ["Vespasiano", "Nerón", "Trajano", "Tito"],
                    "answer": "Vespasiano"
                },
                {
                "question": "¿Cuál fue el nombre del líder militar y político que desempeñó un papel fundamental en la independencia de los países de América del Sur, incluyendo Argentina, Chile y Perú?",
                "options": ["Simón Bolívar", "José de San Martín", "Bernardo O'Higgins", "Antonio José de Sucre"],
                "answer": "Simón Bolívar"
               },